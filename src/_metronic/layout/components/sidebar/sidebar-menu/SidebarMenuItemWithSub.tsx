import React, { Children, useEffect } from 'react'
import clsx from 'clsx'
import { useLocation } from 'react-router'
import { checkIsActive, KTIcon, WithChildren } from '../../../../helpers'
import { useLayout } from '../../../core'

type Props = {
  to: string
  title: string
  icon?: string
  fontIcon?: string
  hasBullet?: boolean
}

const SidebarMenuItemWithSub: React.FC<Props & WithChildren> = ({
  children,
  to,
  title,
  icon,
  fontIcon,
  hasBullet,
}) => {
  const { pathname } = useLocation()
  const isActive = checkIsActive(pathname, to)
  const { config } = useLayout()
  const { app } = config

  return (
    <div
      className={clsx('menu-item', { 'here show': isActive }, 'menu-accordion')}
      data-kt-menu-trigger='click'
    >
      <span className='menu-link'>

        {hasBullet && (
          <span className='menu-bullet'>
            <span className='bullet bullet-dot'></span>
          </span>
        )}
        {icon && app?.sidebar?.default?.menu?.iconType === 'svg' && (
          <span className='menu-icon'>
            {/* <KTIcon iconName={icon} className='fs-2' /> */}
            {title === 'Property' &&
              <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33" fill="none">
                <path fillRule="evenodd" clipRule="evenodd" d="M27.183 2.55664H6.40768V28.2201H4.85156V30.5566H28.7391V28.2201H27.183V2.55664Z" fill="#A7A9AC" />
                <rect x="18.3711" y="5.8584" width="3.86379" height="3.86379" fill="#E7E7E7" />
                <rect x="11.3594" y="5.8584" width="3.86379" height="3.86379" fill="#E7E7E7" />
                <rect x="18.3711" y="10.769" width="3.86379" height="3.86379" fill="#E7E7E7" />
                <rect x="11.3594" y="10.769" width="3.86379" height="3.86379" fill="#E7E7E7" />
                <rect x="18.3711" y="15.6807" width="3.86379" height="3.86379" fill="#E7E7E7" />
                <rect x="14.8906" y="22.7368" width="3.86379" height="6.38936" fill="#E7E7E7" />
                <rect x="11.3594" y="15.6807" width="3.86379" height="3.86379" fill="#E7E7E7" />
              </svg>
            }
            {title === 'Tenant' &&
              // <svg xmlns="http://www.w3.org/2000/svg" width="32" height="33" viewBox="0 0 32 33" fill="none">
              //   <g clipPath="url(#clip0_1009_17241)">
              //     <path d="M11.0142 5.02852V3.22266H6.59375V29.5474H11.0142V27.8569H8.45969V5.02852H11.0142Z" fill="#E7E7E7" />
              //     <path d="M25.158 3.31125L11.7031 0.61084V32.2759L25.158 29.6248V3.31125Z" fill="#A7A9AC" />
              //     <path d="M13.3867 18.6569V14.7661L14.5026 15.3691V18.1741L13.3867 18.6569Z" fill="#E7E7E7" />
              //   </g>
              //   <defs>
              //     <clipPath id="clip0_1009_17241">
              //       <rect width="32" height="32" fill="white" transform="translate(0 0.443359)" />
              //     </clipPath>
              //   </defs>
              // </svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="33" viewBox="0 0 32 33" fill="none">
                <path fillRule="evenodd" clipRule="evenodd" d="M17.6263 15.9422C16.2961 17.2725 14.4918 18.0199 12.6105 18.0199C10.7292 18.0199 8.925 17.2725 7.59473 15.9422C6.26445 14.612 5.51711 12.8077 5.51711 10.9264C5.51711 9.04514 6.26445 7.2409 7.59473 5.91062C8.925 4.58035 10.7292 3.83301 12.6105 3.83301C14.4918 3.83301 16.2961 4.58035 17.6263 5.91062C18.9566 7.2409 19.704 9.04514 19.704 10.9264C19.704 12.8077 18.9566 14.612 17.6263 15.9422ZM0 27.5418C0 23.1527 3.55657 19.5962 7.94562 19.5962H16.8996C16.7464 19.9352 16.661 20.3115 16.661 20.7077V25.5217C16.661 27.0137 17.8712 28.2238 19.3631 28.2238H25.0587C24.8097 28.7156 24.2997 29.0541 23.7088 29.0541H1.51228C0.679787 29.0541 0 28.3792 0 27.5418Z" fill="#E7E7E7" />
                <path fillRule="evenodd" clipRule="evenodd" d="M21.1691 17.3981V18.9025V27.3271H28.3902V18.9025V17.3981C28.3902 16.236 27.4462 15.292 26.2841 15.292H23.2753C22.1131 15.292 21.1691 16.236 21.1691 17.3981ZM29.5937 18.9025V27.3271H30.1955C31.1921 27.3271 32.0007 26.5185 32.0007 25.5218V20.7078C32.0007 19.7111 31.1921 18.9025 30.1955 18.9025H29.5937ZM19.3639 18.9025H19.9656V27.3271H19.3639C18.3672 27.3271 17.5586 26.5185 17.5586 25.5218V20.7078C17.5586 19.7111 18.3672 18.9025 19.3639 18.9025ZM23.9888 16.3777C22.9982 16.3777 22.1952 17.1807 22.1952 18.1713V18.779H27.4209V18.1713C27.4209 17.1807 26.6178 16.3777 25.6272 16.3777H23.9888Z" fill="#A7A9AC" />
              </svg>
            }
            {title === 'Landlord' &&
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fillRule="evenodd" clipRule="evenodd" d="M17.6263 15.4999C16.2961 16.8301 14.4918 17.5775 12.6105 17.5775C10.7292 17.5775 8.925 16.8301 7.59473 15.4999C6.26445 14.1696 5.51711 12.3653 5.51711 10.4841C5.51711 8.60276 6.26445 6.79852 7.59473 5.46824C8.925 4.13797 10.7292 3.39062 12.6105 3.39062C14.4918 3.39062 16.2961 4.13797 17.6263 5.46824C18.9566 6.79852 19.704 8.60276 19.704 10.4841C19.704 12.3653 18.9566 14.1696 17.6263 15.4999ZM0 27.0994C0 22.7104 3.55657 19.1538 7.94562 19.1538H17.2693L16.8654 19.5057L16.8412 19.53C16.4735 19.8977 16.3008 20.353 16.3008 20.831C16.3008 21.7548 16.9837 22.5119 17.8847 22.6138V23.3145C17.882 23.3629 17.8821 23.4014 17.8822 23.4158L17.8822 23.4197V26.1891C17.8822 27.2883 18.7729 28.179 19.8721 28.179H20.2681C20.3022 28.179 20.335 28.1778 20.363 28.1762C20.394 28.1778 20.4306 28.179 20.4686 28.179H21.8545C22.9537 28.179 23.8444 27.2883 23.8444 26.1891V24.2193H24.6832C24.8167 24.5624 24.927 24.9171 25.0122 25.2815V26.1891C25.0122 26.5084 25.0874 26.8102 25.221 27.0776C25.2211 27.0849 25.2211 27.0921 25.2211 27.0994C25.2211 27.9319 24.5462 28.6117 23.7088 28.6117H1.51228C0.679787 28.6117 0 27.9368 0 27.0994ZM18.6547 19.273C21.0441 19.691 23.066 21.1761 24.2112 23.2193H23.6364C23.1983 23.2193 22.8444 23.5732 22.8444 24.0112V26.1891C22.8444 26.736 22.4014 27.179 21.8545 27.179H20.4686C20.4315 27.179 20.3944 27.1766 20.3573 27.1741C20.3276 27.1766 20.2978 27.179 20.2681 27.179H19.8721C19.3252 27.179 18.8822 26.736 18.8822 26.1891V23.4197C18.8822 23.395 18.8822 23.3727 18.8847 23.3504V21.6255H18.0927C17.6473 21.6255 17.3008 21.2765 17.3008 20.831C17.3008 20.6083 17.375 20.4103 17.5483 20.2371L18.6547 19.273Z" fill="#E7E7E7" />
                <path d="M30.759 21.6255C31.1797 21.6255 31.551 21.279 31.551 20.831C31.5757 20.6083 31.4767 20.4103 31.2787 20.2371L29.972 19.0863V16.0917C29.972 15.6537 29.6181 15.2998 29.18 15.2998H28.3881C27.95 15.2998 27.5961 15.6537 27.5961 16.0917V17L24.9604 14.6811C24.8119 14.5573 24.614 14.5078 24.4407 14.5078C24.2675 14.5078 24.0695 14.5326 23.8962 14.7058L17.5483 20.2371C17.375 20.4103 17.3008 20.6083 17.3008 20.831C17.3008 21.2765 17.6473 21.6255 18.0927 21.6255H18.8847V23.3504C18.8822 23.3727 18.8822 23.395 18.8822 23.4197V26.1891C18.8822 26.736 19.3252 27.179 19.8721 27.179H20.2681C20.2978 27.179 20.3275 27.1766 20.3572 27.1741C20.3943 27.1766 20.4315 27.179 20.4686 27.179H21.2605H21.8545C22.4014 27.179 22.8444 26.736 22.8444 26.1891V25.5951V24.0112C22.8444 23.5732 23.1983 23.2193 23.6364 23.2193H25.2203C25.6583 23.2193 26.0122 23.5732 26.0122 24.0112V25.5951V26.1891C26.0122 26.736 26.4552 27.179 27.0022 27.179H27.5961H28.4005C28.4351 27.179 28.4698 27.179 28.5044 27.1766C28.5316 27.179 28.5589 27.179 28.5861 27.179H28.9821C29.529 27.179 29.972 26.736 29.972 26.1891V25.7882C29.9794 25.7238 29.9844 25.657 29.9844 25.5877L29.967 21.623H30.759V21.6255Z" fill="#A7A9AC" />
              </svg>
            }
            {title === 'Operator' &&
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="33" viewBox="0 0 32 33" fill="none">
                <rect x="18.125" y="17.8828" width="13.3929" height="8.59584" rx="1" fill="#A7A9AC" />
                <rect x="17.6523" y="26.6479" width="14.3479" height="0.881836" rx="0.440918" fill="#A7A9AC" />
                <rect x="18.9648" y="18.5845" width="11.7109" height="7.19273" rx="0.5" fill="#E7E7E7" />
                <path fillRule="evenodd" clipRule="evenodd" d="M12.5293 18.0671C14.3985 18.0671 16.1911 17.3246 17.5128 16.0029C18.8345 14.6812 19.577 12.8886 19.577 11.0194C19.577 9.15024 18.8345 7.35762 17.5128 6.03591C16.1911 4.71421 14.3985 3.97168 12.5293 3.97168C10.6601 3.97168 8.86751 4.71421 7.5458 6.03591C6.22409 7.35762 5.48157 9.15024 5.48157 11.0194C5.48157 12.8886 6.22409 14.6812 7.5458 16.0029C8.86751 17.3246 10.6601 18.0671 12.5293 18.0671ZM7.89444 19.6333C3.53365 19.6333 0 23.167 0 27.5277C0 28.3598 0.675407 29.0303 1.50254 29.0303H23.5561C24.1658 29.0303 24.6888 28.6676 24.9247 28.1482H17.6943C17.142 28.1482 16.6943 27.7005 16.6943 27.1482V27.0296C16.6943 26.5701 17.0042 26.183 17.4264 26.0659V19.6376C17.3393 19.6347 17.2519 19.6333 17.1642 19.6333H7.89444Z" fill="#E7E7E7" />
                <path fillRule="evenodd" clipRule="evenodd" d="M5.79153 14.7612C5.35937 14.143 4.60235 12.3389 5.03158 10.0685C5.56811 7.23044 7.46761 3.45389 12.5626 3.45389C17.4634 3.45389 19.2628 7.15477 19.6514 7.95398C19.6668 7.98565 19.68 8.01276 19.6911 8.03491C19.9816 8.61592 20.5179 10.2696 20.3391 11.6997C20.3341 11.7398 20.3292 11.779 20.3245 11.8172C20.159 13.1424 20.1317 13.3602 19.9146 13.5992C19.6911 13.845 18.328 15.1411 17.4341 15.4986C17.2695 15.5644 17.1163 15.6288 16.9707 15.6899C16.3254 15.9608 15.8293 16.169 15.1548 16.169H14.7019C14.349 15.7894 13.6337 15.5297 12.8087 15.5297C11.6337 15.5297 10.6812 16.0565 10.6812 16.7063C10.6812 17.3561 11.6337 17.8829 12.8087 17.8829C13.6251 17.8829 14.3341 17.6286 14.6908 17.2554C15.0292 17.2319 15.3573 17.1971 15.6214 17.1502C16.627 16.9714 17.5364 16.6606 18.3409 16.169C19.116 15.6953 20.1074 14.7859 20.6584 14.2805C20.6792 14.2613 20.6995 14.2428 20.719 14.2249C21.2553 13.7332 22.1268 12.8394 22.0822 10.9176C22.0451 9.3239 21.1173 8.34183 20.7535 7.9567C20.6786 7.87742 20.6276 7.82343 20.6132 7.79462C20.6047 7.77762 20.5905 7.74607 20.5708 7.70203C20.3945 7.30886 19.7719 5.92052 18.7398 5.00988C17.5921 3.99725 15.5834 2.46143 12.5626 2.46143C9.54173 2.46143 7.24643 4.11541 6.36882 5.00988C5.64017 5.75253 5.02786 7.01596 4.76371 7.561C4.70971 7.67243 4.67026 7.75383 4.64734 7.79462C4.62387 7.83639 4.54941 7.90597 4.44407 8.00439C3.94344 8.47216 2.74551 9.59147 3.01043 11.4738C3.29034 13.4626 4.03605 13.934 4.47665 14.2126C4.54081 14.2531 4.5985 14.2896 4.64734 14.3261C4.95473 14.5556 5.53821 14.7118 5.79153 14.7612Z" fill="#A7A9AC" />
              </svg>
            }
          </span>
        )}
        {/* {fontIcon && app?.sidebar?.default?.menu?.iconType === 'font' && (
          <i className={clsx('bi fs-3', fontIcon)}></i>
        )} */}
        <span className='menu-title'>{title}</span>
        <span className='menu-arrow'></span>
      </span>
      <div className={clsx('menu-sub menu-sub-accordion', { 'menu-active-bg': isActive })}>
        {children}
      </div>
    </div >
  )
}

export { SidebarMenuItemWithSub }
